export const assets: Record<string, string> = {
  "uu.ts": "Ly8gdXU6IGEgc2V0IG9mIHV0aWxpdHkgZnVuY3Rpb25zIGZvciBtb2Rlcm4gd2ViIFVJDQovLyBoYXNoOiBhNmJjODhmZGRmZGRlMDMzOWU3NzRhZTQ2MzQ0YzUwZWQ5YTFlNWNlZjUxMWVkMjY2OTg2YjVhZjA4ZTg2MTk3DQovLyBQbGVhc2UgZG8gbm90IG1vZGlmeSB0aGlzIGZpbGUgZGlyZWN0bHkuIFVzZSB0aGUgZm9sbG93aW5nIGNvbW1hbmQgdG8gdXBkYXRlIHRoaXMgZmlsZSBvbiBhIGRlbm8gZW52aXJvbm1lbnQ6DQovLyBkZW5vIHJ1biAtQSAtLXJlbG9hZCBqc3I6QHRpbWVwcC91dS9pbnN0YWxsDQoNCmltcG9ydCAqIGFzIHR1IGZyb20gJy4vdHUudHMnDQpleHBvcnQgKiBmcm9tICcuL3R1LnRzJw0KDQpleHBvcnQgZnVuY3Rpb24gdHJpZ2dlckRvd25sb2FkKGJsb2I6IEJsb2IsIGZpbGVuYW1lOiBzdHJpbmcpIHsNCiAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpDQogICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKQ0KICAgIGEuaHJlZiA9IHVybA0KICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZQ0KICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSkNCiAgICBhLmNsaWNrKCkNCiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpDQp9DQoNCmV4cG9ydCBmdW5jdGlvbiBkZXJpdmVkVXJsKG9sZFVybDogc3RyaW5nLCBwYXJhbXNUb0FkZDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgcGFyYW1zVG9SZW1vdmU/OiBSZWdFeHApIHsNCiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKG9sZFVybCkNCiAgICBpZiAocGFyYW1zVG9SZW1vdmUpIHsNCiAgICAgICAgY29uc3Qga2V5cyA9IFsuLi51cmwuc2VhcmNoUGFyYW1zLmtleXMoKV0NCiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykgew0KICAgICAgICAgICAgaWYgKHBhcmFtc1RvUmVtb3ZlLnRlc3Qoa2V5KSkgew0KICAgICAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKGtleSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwYXJhbXNUb0FkZCkpIHsNCiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5LCB2YWx1ZSkNCiAgICB9DQogICAgcmV0dXJuIHVybC50b1N0cmluZygpDQp9DQoNCmV4cG9ydCBmdW5jdGlvbiBkZXJpdmVkQ3VycmVudFVybChwYXJhbXNUb0FkZDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgcGFyYW1zVG9SZW1vdmU/OiBSZWdFeHApIHsNCiAgICByZXR1cm4gZGVyaXZlZFVybCh3aW5kb3cubG9jYXRpb24uaHJlZiwgcGFyYW1zVG9BZGQsIHBhcmFtc1RvUmVtb3ZlKQ0KfQ0KDQpleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPihwYXJlbnQ6IEVsZW1lbnQgfCBudWxsLCB0YWdOYW1lOiBLLCBjbGFzc2VzOiBzdHJpbmdbXSA9IFtdLCB0ZXh0Pzogc3RyaW5nLCBzdHlsZTogUGFydGlhbDxDU1NTdHlsZURlY2xhcmF0aW9uPiA9IHt9KSB7DQogICAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSkNCiAgICBlLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NlcykNCiAgICBpZiAocGFyZW50KSBwYXJlbnQuYXBwZW5kQ2hpbGQoZSkNCiAgICBpZiAodGV4dCkgZS50ZXh0Q29udGVudCA9IHRleHQNCiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzdHlsZSkpIHsNCiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgIGUuc3R5bGVba2V5IGFzIGFueV0gPSB2YWx1ZSBhcyBzdHJpbmcNCiAgICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gZQ0KfQ0KDQpleHBvcnQgZnVuY3Rpb24gZm9yRWFjaFRhYmxlQ2VsbCh0YWJsZTogSFRNTFRhYmxlRWxlbWVudCwgY2FsbGJhY2s6IChjZWxsOiBIVE1MVGFibGVDZWxsRWxlbWVudCwgcm93OiBudW1iZXIsIGNvbDogbnVtYmVyKSA9PiB2b2lkKSB7DQogICAgLy8gcm93OiAwIGlzIGhlYWRlciwgMSBpcyBmaXJzdCByb3cNCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYmxlLnJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgY29uc3Qgcm93ID0gdGFibGUucm93c1tpXQ0KICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJvdy5jZWxscy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgY29uc3QgY2VsbCA9IHJvdy5jZWxsc1tqXQ0KICAgICAgICAgICAgY2FsbGJhY2soY2VsbCwgaSwgaikNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxBc3luY0Z1bmN0aW9uV2l0aFByb2dyZXNzPFQ+KGZuOiAoKSA9PiBQcm9taXNlPFQ+KSB7DQogICAgY29uc3QgZGlhbG9nID0gY3JlYXRlRWxlbWVudChkb2N1bWVudC5ib2R5LCAnZGlhbG9nJywgW10pDQogICAgY29uc3QgZGMgPSBjcmVhdGVFbGVtZW50KGRpYWxvZywgJ2RpdicsIFtdKQ0KICAgIGRjLnN0eWxlLnRleHRBbGlnbiA9ICJjZW50ZXIiDQogICAgY3JlYXRlRWxlbWVudChkYywgJ2g0JywgWydtLTInXSwgJ1BsZWFzZSB3YWl0Li4uJykNCiAgICAvLyBzaG93IGEgY2VudGVyZWQgc3Bpbm5lcg0KICAgIGNyZWF0ZUVsZW1lbnQoZGMsICdkaXYnLCBbJ3NwaW5uZXItYm9yZGVyJywgJ3RleHQtcHJpbWFyeSddLCAnJykNCiAgICBkaWFsb2cuc2hvd01vZGFsKCkNCiAgICB0cnkgew0KICAgICAgICBjb25zdCByID0gYXdhaXQgZm4oKQ0KICAgICAgICBkaWFsb2cuY2xvc2UoKQ0KICAgICAgICBkaWFsb2cucmVtb3ZlKCkNCiAgICAgICAgcmV0dXJuIHINCiAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIGRpYWxvZy5jbG9zZSgpDQogICAgICAgIGRpYWxvZy5yZW1vdmUoKQ0KICAgICAgICB0aHJvdyBlDQogICAgfQ0KfQ0KDQovLyBzaG93IGluZm9ybWF0aW9uIGRpYWxvZywgY29udGVudCBpcyBub3JtYWwgdGV4dCwgZGlhbG9nIG5vIGxvbmdlciBmaXggaGVpZ2h0DQpleHBvcnQgZnVuY3Rpb24gc2hvd0luZm8odGl0bGU6IHN0cmluZywgY29udGVudDogc3RyaW5nKSB7DQogICAgY29uc3QgZGlhbG9nID0gY3JlYXRlRWxlbWVudChkb2N1bWVudC5ib2R5LCAnZGlhbG9nJywgW10pDQoNCiAgICBjb25zdCBkYyA9IGNyZWF0ZUVsZW1lbnQoZGlhbG9nLCAnZGl2JywgW10pDQoNCiAgICBjb25zdCBoZWFkZXIgPSBjcmVhdGVFbGVtZW50KGRjLCAnZGl2JywgW10pDQogICAgaGVhZGVyLnN0eWxlLnRleHRBbGlnbiA9ICJjZW50ZXIiDQogICAgY3JlYXRlRWxlbWVudChoZWFkZXIsICdoMicsIFtdLCB0aXRsZSkNCiAgICBjcmVhdGVFbGVtZW50KGRjLCAnaHInLCBbXSkNCg0KICAgIGNvbnN0IG1haW4gPSBjcmVhdGVFbGVtZW50KGRjLCAnZGl2JywgW10pDQogICAgbWFpbi5zdHlsZS5tYXhXaWR0aCA9ICI4MDBweCINCiAgICBjb25zdCBoID0gdHUuc2VnbWVudEJ5UmVnZXgoY29udGVudCwgW1svZXJyb3I6L2lnLCAncmVkJ11dKQ0KICAgIC8vIG1haW4uYXBwZW5kQ2hpbGQoaCkNCg0KICAgIGNyZWF0ZUVsZW1lbnQoZGMsICdocicsIFtdKQ0KDQogICAgY29uc3QgZm9vdGVyID0gY3JlYXRlRWxlbWVudChkYywgJ2RpdicsIFsnZC1mbGV4JywgJ2p1c3RpZnktY29udGVudC1jZW50ZXInXSkNCiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoZm9vdGVyLCAnYnV0dG9uJywgWydidG4nLCAnYnRuLXByaW1hcnknXSwgJ0Nsb3NlJykNCiAgICBjbG9zZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gew0KICAgICAgICBkaWFsb2cuY2xvc2UoKQ0KICAgICAgICBkaWFsb2cucmVtb3ZlKCkNCiAgICB9DQogICAgZGlhbG9nLnNob3dNb2RhbCgpDQogICAgcmV0dXJuIGRpYWxvZw0KfQ0KDQpleHBvcnQgZnVuY3Rpb24gaGlnaGxpZ2h0VGV4dCh0ZXh0OiBzdHJpbmcsIHJ1bGVzOiBbUmVnRXhwLCBzdHJpbmddW10pIHsNCiAgICBjb25zdCBwYXJ0cyA9IHR1LnNlZ21lbnRCeVJlZ2V4KHRleHQsIHJ1bGVzKQ0KICAgIHJldHVybiBwYXJ0cy5tYXAocGFydCA9PiB7DQogICAgICAgIGNvbnN0IHNwYW4gPSBjcmVhdGVFbGVtZW50KG51bGwsICdzcGFuJywgW10sIHBhcnQuY29udGVudCkNCiAgICAgICAgaWYgKHBhcnQuY2F0ZWdvcnkpIHsNCiAgICAgICAgICAgIHNwYW4uc3R5bGUuY29sb3IgPSBwYXJ0LmNhdGVnb3J5DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHNwYW4NCiAgICB9KQ0KfQ0KDQpleHBvcnQgZnVuY3Rpb24gY3JlYXRlSnNvblZpZXcoY29udGVudDogc3RyaW5nKSB7DQogICAgY29uc3QgcGFydHMgPSB0dS5zZWdtZW50SnNvbihjb250ZW50KQ0KICAgIGNvbnN0IHByZSA9IGNyZWF0ZUVsZW1lbnQobnVsbCwgJ3ByZScsIFtdKQ0KDQogICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7DQogICAgICAgIGNvbnN0IHNwYW4gPSBjcmVhdGVFbGVtZW50KHByZSwgJ3NwYW4nKQ0KICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gcGFydC5jb250ZW50DQogICAgICAgIHN3aXRjaCAocGFydC5jYXRlZ29yeSkgew0KICAgICAgICAgICAgY2FzZSAna2V5Jzogc3Bhbi5zdHlsZS5jb2xvciA9ICdibHVlJzsgYnJlYWsNCiAgICAgICAgICAgIC8vIGNhc2UgJ3N0cmluZyc6IHNwYW4uc3R5bGUuY29sb3IgPSAncHVycGxlJzsgYnJlYWsNCiAgICAgICAgICAgIGNhc2UgJ251bWJlcic6IHNwYW4uc3R5bGUuY29sb3IgPSAnI2Y0MzllNic7IGJyZWFrDQogICAgICAgICAgICBjYXNlICd0cnVlJzogc3Bhbi5zdHlsZS5jb2xvciA9ICdncmVlbic7IGJyZWFrDQogICAgICAgICAgICBjYXNlICdmYWxzZSc6IHNwYW4uc3R5bGUuY29sb3IgPSAncmVkJzsgYnJlYWsNCiAgICAgICAgICAgIGNhc2UgJ251bGwnOiBzcGFuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd5ZWxsb3cnOyBicmVhaw0KICAgICAgICAgICAgY2FzZSAncHVuY3R1YXRpb24nOiBzcGFuLnN0eWxlLmZvbnRXZWlnaHQgPSAiODAwIjsgYnJlYWsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiBwcmUNCn0NCg0KZXhwb3J0IGZ1bmN0aW9uIHNob3dMYXJnZUpzb25SZXN1bHQodGl0bGU6IHN0cmluZywgY29udGVudDogc3RyaW5nKSB7DQogICAgY29uc3QgZGlhbG9nID0gY3JlYXRlRWxlbWVudChkb2N1bWVudC5ib2R5LCAnZGlhbG9nJywgW10pDQogICAgZGlhbG9nLnN0eWxlLndpZHRoID0gIjgwdnciOyAgDQogICAgZGlhbG9nLnN0eWxlLmhlaWdodCA9ICI4MHZoIjsgDQoNCiAgICBjb25zdCBkYyA9IGNyZWF0ZUVsZW1lbnQoZGlhbG9nLCAnZGl2JywgW10pDQogICAgZGMuc3R5bGUud2lkdGggPSAiMTAwJSI7ICAgLy8g5a695bqmMTAwJQ0KICAgIGRjLnN0eWxlLmhlaWdodCA9ICIxMDAlIjsgIC8vIOmrmOW6pjEwMCUNCiAgICBkYy5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KICAgIGRjLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsNCiAgICBkYy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gImNvbHVtbiI7DQoNCiAgICBjb25zdCBoZWFkZXIgPSBjcmVhdGVFbGVtZW50KGRjLCAnZGl2JywgW10pDQogICAgY3JlYXRlRWxlbWVudChoZWFkZXIsICdoMicsIFtdLCB0aXRsZSkNCg0KICAgIGNvbnN0IG1haW4gPSBjcmVhdGVFbGVtZW50KGRjLCAncHJlJywgW10pDQogICAgY29uc3Qgc3BhbnMgPSBoaWdobGlnaHRUZXh0KGNvbnRlbnQsIFtbLyJbXiJdKyI6L2csICdibHVlJ10sIFsv4oCmWzAtOV0rIG1vcmUgKGNoYXJzfGl0ZW1zKeKApi9nLCAncmVkJ11dKQ0KICAgIG1haW4uYXBwZW5kKC4uLnNwYW5zKQ0KICAgIG1haW4uc3R5bGUuZmxleEdyb3cgPSAiMSI7ICAgLy8g6K6pIHRleHRhcmVhIOWNoOa7oeWJqeS9meepuumXtA0KICAgIG1haW4uc3R5bGUud2lkdGggPSAiMTAwJSI7ICAgLy8g5a695bqmMTAwJQ0KDQogICAgY29uc3QgY2xvc2VCdXR0b24gPSBjcmVhdGVFbGVtZW50KGRjLCAnYnV0dG9uJywgWydidG4nLCAnYnRuLXByaW1hcnknXSwgJ0Nsb3NlJykNCiAgICBjbG9zZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gew0KICAgICAgICBkaWFsb2cuY2xvc2UoKQ0KICAgICAgICBkaWFsb2cucmVtb3ZlKCkNCiAgICB9DQogICAgZGlhbG9nLnNob3dNb2RhbCgpDQogICAgcmV0dXJuIGRpYWxvZw0KfQ0KDQpleHBvcnQgdHlwZSBTZWxlY3RPcHRpb24gPSB7DQogICAgc2luZ2xlU2VsZWN0OiBib29sZWFuDQogICAgcHJlc2VydmVPcmRlcjogYm9vbGVhbg0KICAgIGluaXRpYWxTZWxlY3Rpb246IHN0cmluZ1tdDQoNCiAgICAvLyByZXR1cm4gYG5ld1NlbGVjdGlvbmAgaWYgdGhlIG5ldyBzZWxlY3Rpb24gaXMgdmFsaWQNCiAgICAvLyBvdGhlcndpc2UsIHJldHVybiBhIHNlbGVjdGlvbiBpZiBjaGVja2VyIGNhbiBmaXggaW52YWxpZCBzZWxlY3Rpb24NCiAgICAvLyBvdGhlcndpc2UsIHJldHVybiBhbiBlcnJvciBtZXNzYWdlDQogICAgY2hlY2tlcjogKG9sZFNlbGVjdGlvbjogc3RyaW5nW10sIG5ld1NlbGVjdGlvbjogc3RyaW5nW10pID0+IHN0cmluZ1tdIHwgc3RyaW5nDQp9DQoNCmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93U2VsZWN0aW9uKHRpdGxlOiBzdHJpbmcsIGRhdGE6IHN0cmluZ1tdLCBvcHRpb25zOiBQYXJ0aWFsPFNlbGVjdE9wdGlvbj4pIHsNCiAgICBjb25zdCBkaWFsb2cgPSBjcmVhdGVFbGVtZW50KGRvY3VtZW50LmJvZHksICdkaWFsb2cnLCBbXSwgJycsIHt3aWR0aDogJzgwdncnfSkNCiAgICBjb25zdCBkYyA9IGNyZWF0ZUVsZW1lbnQoZGlhbG9nLCAnZGl2JywgWydkLWZsZXgnLCAnZmxleC1jb2x1bW4nXSkNCiAgICBjb25zdCBoZWFkZXIgPSBjcmVhdGVFbGVtZW50KGRjLCAnZGl2JywgW10pDQogICAgY3JlYXRlRWxlbWVudChoZWFkZXIsICdoMicsIFtdLCB0aXRsZSkNCiAgICBjb25zdCBzZWxlY3RlZENvbnRlbnQgPSBjcmVhdGVFbGVtZW50KGRjLCAnZGl2JywgW10pDQogICAgLy8gY3JlYXRlRWxlbWVudChkYywgJ2hyJywgWyd3LTEwMCddKQ0KICAgIA0KICAgIC8vIGZpbHRlciB0ZXh0DQogICAgY29uc3QgZmlsdGVyID0gY3JlYXRlRWxlbWVudChkYywgJ2lucHV0JywgWydmb3JtLWNvbnRyb2wnLCAnbXQtMicsICdtYi0yJ10pDQogICAgZmlsdGVyLnBsYWNlaG9sZGVyID0gIkZpbHRlciINCiAgICANCiAgICBjb25zdCBtYWluID0gY3JlYXRlRWxlbWVudChkYywgJ2RpdicsIFsnZC1mbGV4JywgJ292ZXJmbG93LWF1dG8nLCAnZmxleC13cmFwJ10pDQogICAgY3JlYXRlRWxlbWVudChkYywgJ2hyJywgWyd3LTEwMCddKQ0KICAgIGNvbnN0IGFsZXJ0ID0gY3JlYXRlRWxlbWVudChkYywgJ2RpdicsIFsnYWxlcnQnLCAnYWxlcnQtZGFuZ2VyJywgJ2Qtbm9uZSddKQ0KICAgIGNvbnN0IGZvb3RlciA9IGNyZWF0ZUVsZW1lbnQoZGMsICdkaXYnLCBbJ2QtZmxleCcsICdqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJ10pDQogICAgY29uc3Qgb2tCdG4gPSBjcmVhdGVFbGVtZW50KGZvb3RlciwgJ2J1dHRvbicsIFsnYnRuJywgJ2J0bi1wcmltYXJ5JywgJ21lLTInXSwgJ09LJykNCg0KICAgIGxldCBzZWxlY3RlZCA9IG9wdGlvbnMuaW5pdGlhbFNlbGVjdGlvbiB8fCBbXQ0KDQogICAgZnVuY3Rpb24gc3luY1NlbGVjdGVkKCkgew0KICAgICAgICBzZWxlY3RlZENvbnRlbnQuaW5uZXJIVE1MID0gJycNCiAgICAgICAgY3JlYXRlRWxlbWVudChzZWxlY3RlZENvbnRlbnQsICdzcGFuJywgWydtLTEnXSwgJ1NlbGVjdGVkOiAnLCB7Y29sb3I6ICdibHVlJ30pDQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBzZWxlY3RlZFtpXQ0KICAgICAgICAgICAgY29uc3QgdGV4dCA9IG9wdGlvbnMucHJlc2VydmVPcmRlciA/IGAke2kgKyAxfTogJHtpdGVtfWAgOiBpdGVtDQogICAgICAgICAgICBjcmVhdGVFbGVtZW50KHNlbGVjdGVkQ29udGVudCwgJ3NwYW4nLCBbJ20tMSddLCB0ZXh0KQ0KICAgICAgICB9DQoNCiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG1haW4uY2hpbGRyZW4pIHsNCiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBpdGVtIGFzIEhUTUxTcGFuRWxlbWVudA0KICAgICAgICAgICAgY29uc3QgaXNJdGVtU2VsZWN0ZWQgPSBzZWxlY3RlZC5pbmNsdWRlcyhpdGVtLnRleHRDb250ZW50ISkNCiAgICAgICAgICAgIHNwYW4uY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnLCBpc0l0ZW1TZWxlY3RlZCkNCiAgICAgICAgICAgIHNwYW4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaXNJdGVtU2VsZWN0ZWQgPyAncmdiYSgwLCAxMjMsIDI1NSwgMC41KScgOiAncmdiKDI0NCwgMjQ0LCAyNDQpJw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGEpIHsNCiAgICAgICAgY29uc3Qgc3BhbiA9IGNyZWF0ZUVsZW1lbnQobWFpbiwgJ3NwYW4nLCBbJ211bHRpLXNlbGVjdCcsICdyb3VuZGVkLTEnLCAncC0xJywgJ20tMSddLCBpdGVtKQ0KICAgICAgICBzcGFuLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIg0KICAgICAgICBzcGFuLm9uY2xpY2sgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBvbGRTZWxlY3Rpb24gPSBbLi4uc2VsZWN0ZWRdDQogICAgICAgICAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSBvcHRpb25zLnNpbmdsZVNlbGVjdCA/IFtpdGVtXSA6IChzZWxlY3RlZC5pbmNsdWRlcyhpdGVtKSA/IHNlbGVjdGVkLmZpbHRlcihpID0+IGkgIT09IGl0ZW0pIDogWy4uLnNlbGVjdGVkLCBpdGVtXSkNCiAgICAgICAgICAgIGNvbnN0IHIgPSBvcHRpb25zLmNoZWNrZXI/LihvbGRTZWxlY3Rpb24sIG5ld1NlbGVjdGlvbikNCiAgICAgICAgICAgIGlmICh0eXBlb2YgciA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICAvLyBpbnZhbGlkIHN0YXRlDQogICAgICAgICAgICAgICAgYWxlcnQudGV4dENvbnRlbnQgPSByDQogICAgICAgICAgICAgICAgYWxlcnQuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJykNCiAgICAgICAgICAgICAgICBva0J0bi5kaXNhYmxlZCA9IHRydWUNCiAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IG5ld1NlbGVjdGlvbg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBmaXhlZCBzdGF0ZQ0KICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gciB8fCBuZXdTZWxlY3Rpb24NCiAgICAgICAgICAgICAgICBhbGVydC5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKQ0KICAgICAgICAgICAgICAgIG9rQnRuLmRpc2FibGVkID0gZmFsc2UNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN5bmNTZWxlY3RlZCgpDQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmaWx0ZXIub25pbnB1dCA9ICgpID0+IHsNCiAgICAgICAgY29uc3QgdiA9IGZpbHRlci52YWx1ZS50b0xvd2VyQ2FzZSgpDQogICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBtYWluLmNoaWxkcmVuKSB7DQogICAgICAgICAgICBpZiAoaXRlbS50ZXh0Q29udGVudD8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh2KSkgew0KICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJykNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgbGV0IHJlc29sdmVyOiAoKHZhbHVlOiBzdHJpbmdbXXx1bmRlZmluZWQpID0+IHZvaWQpDQogICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPHN0cmluZ1tdfHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICByZXNvbHZlciA9IHJlc29sdmUNCiAgICB9KQ0KDQogICAgb2tCdG4ub25jbGljayA9ICgpID0+IHsNCiAgICAgICAgZGlhbG9nLmNsb3NlKCkNCiAgICAgICAgZGlhbG9nLnJlbW92ZSgpDQogICAgICAgIHJlc29sdmVyKHNlbGVjdGVkKQ0KICAgIH0NCg0KICAgIC8vIGhhbmRsZSBlc2Mga2V5IHRvIGNsb3NlIHRoZSBkaWFsb2cNCiAgICBkaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7DQogICAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsNCiAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpDQogICAgICAgICAgICBkaWFsb2cucmVtb3ZlKCkNCiAgICAgICAgICAgIHJlc29sdmVyKHVuZGVmaW5lZCkNCiAgICAgICAgfQ0KICAgIH0pDQoNCiAgICBzeW5jU2VsZWN0ZWQoKQ0KICAgIGRpYWxvZy5zaG93TW9kYWwoKQ0KICAgIHJldHVybiBwcm9taXNlDQp9DQoNCmV4cG9ydCB0eXBlIFRhYmxlQ29sdW1uUHJvcGVydHkgPSB7DQogICAgZm9ybWF0ZXI/OiAodmFsdWU6IGFueSkgPT4gc3RyaW5nIHwgSFRNTEVsZW1lbnQNCiAgICBzdHlsZT86IFBhcnRpYWw8Q1NTU3R5bGVEZWNsYXJhdGlvbj4NCn0NCmV4cG9ydCB0eXBlIFRhYmxlUHJlc2VudGF0aW9uID0gew0KICAgIGNvbHVtbnM6IHN0cmluZ1tdDQogICAgY29sdW1uUHJvcGVydGllczogUmVjb3JkPHN0cmluZywgVGFibGVDb2x1bW5Qcm9wZXJ0eT4NCiAgICBzb3J0Qnk6IHsNCiAgICAgICAgY29sdW1uOiBzdHJpbmcNCiAgICAgICAgb3JkZXI6ICdhc2MnIHwgJ2Rlc2MnDQogICAgfVtdDQoNCiAgICAvLyBJZiBub3QgZW1wdHksIHJhdyBpbmRleCB3aWxsIGJlIHNob3duIGluIHRoZSBmaXJzdCBjb2x1bW4gd2l0aCB0aGUgZ2l2ZW4gbmFtZQ0KICAgIC8vIG5vdGU6IHRoaXMgY29sdW1uIGNhbiBiZSBoaWRlIC8gc29ydCBhcyB3ZWxsDQogICAgLy8gdHlwaWNhbCB1c2FnZXMgaXMgcGFzc2luZyBhICcjJyBoZXJlDQogICAgcmF3SW5kZXhDb2x1bW46IHN0cmluZw0KDQogICAgcGFnZVNpemU/OiBudW1iZXINCiAgICBvblJvd0NsaWNrOiAoaXRlbTogYW55KSA9PiB2b2lkDQogICAgc3RhdGVLZXk6IHN0cmluZyAvLyB1c2VkIHRvIHNhdmUgdGhlIHN0YXRlIG9mIHRoZSB0YWJsZSBpbiBsb2NhbCBzdG9yYWdlDQp9DQoNCmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYWJsZUZyb21BcnJheShhcnI6IGFueVtdLCBwcmVzZW50YXRpb246IFBhcnRpYWw8VGFibGVQcmVzZW50YXRpb24+ID0ge30pIHsNCiAgICAvLyBoZWxwZXIgZnVuY3Rpb25zDQogICAgY29uc3QgdG9BcnJvdyA9IChzOiBzdHJpbmcpID0+IHMgPT09ICdhc2MnID8gJ+Kshu+4jycgOiAn4qyH77iPJw0KICAgIGNvbnN0IGZyb21BcnJvdyA9IChzOiBzdHJpbmcpID0+IHMgPT09ICfirIbvuI8nID8gJ2FzYycgOiAnZGVzYycNCiAgICBjb25zdCBkZWZhdWx0Q29sdW1uRm9ybWF0ZXIgPSAodmFsdWU6IGFueSkgPT4gew0KICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkgew0KICAgICAgICAgICAgcmV0dXJuIHR1LnNhZmVFeGVjdXRlKCgpID0+IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCAyKSwgZSA9PiBgJHtlfWApDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gdmFsdWUgfHwgJycNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLyBvdmVyYWxsIGRvbQ0KICAgIGNvbnN0IHZpZXcgPSBjcmVhdGVFbGVtZW50KG51bGwsICdkaXYnKQ0KICAgIGNvbnN0IHRvb2xiYXIgPSBjcmVhdGVFbGVtZW50KHZpZXcsICdkaXYnLCBbJ2lucHV0LWdyb3VwJywgJ21iLTMnXSkNCiAgICBjb25zdCBmaWVsZFNlbGVjdCA9IGNyZWF0ZUVsZW1lbnQodG9vbGJhciwgJ2J1dHRvbicsIFsnYnRuJywgJ2J0bi1wcmltYXJ5JywgJ21lLTInXSwgJ0NvbHVtbnMnKQ0KICAgIGNvbnN0IHNvcnRCdG4gPSBjcmVhdGVFbGVtZW50KHRvb2xiYXIsICdidXR0b24nLCBbJ2J0bicsICdidG4tcHJpbWFyeSddLCAnU29ydCcpDQogICAgY29uc3Qgc29ydEhpbnQgPSBjcmVhdGVFbGVtZW50KHRvb2xiYXIsICdzcGFuJywgWydpbnB1dC1ncm91cC10ZXh0JywgJ21lLTInXSwgJycpDQogICAgY3JlYXRlRWxlbWVudCh0b29sYmFyLCAnc3BhbicsIFsnaW5wdXQtZ3JvdXAtdGV4dCddLCAnRmlsdGVyJykNCiAgICBjb25zdCBmaWx0ZXIgPSBjcmVhdGVFbGVtZW50KHRvb2xiYXIsICdpbnB1dCcsIFsnZm9ybS1jb250cm9sJ10sICcnKQ0KICAgIGNvbnN0IGNvdW50cyA9IGNyZWF0ZUVsZW1lbnQodG9vbGJhciwgJ3NwYW4nLCBbJ2lucHV0LWdyb3VwLXRleHQnXSwgJzIwIC8gMTAwJykNCg0KICAgIC8vIG5vdyBwYWdpbmcgc2VjdGlvbiwgd2hpY2ggbG9va3MgbGlrZSA0IGJ1dHRvbnMgYW5kIGFuIGVkaXQ6ICI8PCA8IFs4XSA+ID4+DQogICAgY29uc3QgcGFnaW5nID0gY3JlYXRlRWxlbWVudCh0b29sYmFyLCAnZGl2JywgWydidG4tZ3JvdXAnXSkNCiAgICBjb25zdCBmaXJzdEJ0biA9IGNyZWF0ZUVsZW1lbnQocGFnaW5nLCAnYnV0dG9uJywgWydidG4nLCAnYnRuLXByaW1hcnknLCAnbXMtMiddLCAnPDwnKQ0KICAgIGNvbnN0IHByZXZCdG4gPSBjcmVhdGVFbGVtZW50KHBhZ2luZywgJ2J1dHRvbicsIFsnYnRuJywgJ2J0bi1wcmltYXJ5J10sICc8JykNCiAgICBjb25zdCBwYWdlVGV4dCA9IGNyZWF0ZUVsZW1lbnQocGFnaW5nLCAnYnV0dG9uJywgWydidG4nLCAnYnRuLXNlY29uZGFyeSddLCAnMjAgKiAyLzUnKQ0KICAgIGNvbnN0IG5leHRCdG4gPSBjcmVhdGVFbGVtZW50KHBhZ2luZywgJ2J1dHRvbicsIFsnYnRuJywgJ2J0bi1wcmltYXJ5J10sICc+JykNCiAgICBjb25zdCBsYXN0QnRuID0gY3JlYXRlRWxlbWVudChwYWdpbmcsICdidXR0b24nLCBbJ2J0bicsICdidG4tcHJpbWFyeSddLCAnPj4nKQ0KDQoNCiAgICBjb25zdCB0YWJsZSA9IGNyZWF0ZUVsZW1lbnQodmlldywgJ3RhYmxlJywgWyd0YWJsZScsICd0YWJsZS1zdHJpcGVkJywgJ3RhYmxlLWJvcmRlcmVkJywgJ3RhYmxlLWhvdmVyJ10pDQogICAgY29uc3QgdGhlYWQgPSBjcmVhdGVFbGVtZW50KHRhYmxlLCAndGhlYWQnKQ0KICAgIGNvbnN0IHRib2R5ID0gY3JlYXRlRWxlbWVudCh0YWJsZSwgJ3Rib2R5JykNCg0KICAgIC8vIGxvY2FsIHN0YXRlcw0KICAgIGNvbnN0IHByb3BlcnRpZXMgPSBbcHJlc2VudGF0aW9uLnJhd0luZGV4Q29sdW1uLCAuLi50dS5kYXRhUHJvcGVydGllcyhhcnIpXS5maWx0ZXIoQm9vbGVhbikgYXMgc3RyaW5nW10NCiAgICBsZXQgY3VycmVudFBhZ2UgPSAwIC8vIHBhZ2Ugd29uJ3QgYmUgcGVyc2lzdGVkDQogICAgbGV0IHRvdGFsVmlzaWJsZSA9IDAgLy8gdG90YWwgdmlzaWJsZSByb3dzLCB1c2VkIGZvciBwYWdpbmcNCiAgICBjb25zdCBzdGF0ZSA9IHR1LmNyZWF0ZVN0YXRlKHByZXNlbnRhdGlvbiwgWydjb2x1bW5zJywgJ3NvcnRCeSddLCBwcmVzZW50YXRpb24uc3RhdGVLZXkpDQoNCiAgICB0eXBlIFJvdyA9IEhUTUxUYWJsZVJvd0VsZW1lbnQgJiB7IHJhd0luZGV4OiBudW1iZXIgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIGNvbnN0cnVjdFRhYmxlKCkgew0KICAgICAgICBjb25zdCB0ciA9IGNyZWF0ZUVsZW1lbnQodGhlYWQsICd0cicsIFtdKQ0KICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgcHJvcGVydGllcykgew0KICAgICAgICAgICAgY29uc3QgdGggPSBjcmVhdGVFbGVtZW50KHRyLCAndGgnLCBbXSwgcHJvcCwge2N1cnNvcjogJ3BvaW50ZXInLCB1c2VyU2VsZWN0OiAnbm9uZSd9KQ0KICAgICAgICAgICAgdGgub25jbGljayA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBzID0gc3RhdGUuc29ydEJ5Py5maW5kKHMgPT4gcy5jb2x1bW4gPT09IHByb3ApDQogICAgICAgICAgICAgICAgaWYgKHMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHMub3JkZXIgPT09ICdhc2MnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zb3J0QnkgPSBbe2NvbHVtbjogcHJvcCwgb3JkZXI6ICdkZXNjJ31dDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocy5vcmRlciA9PT0gJ2Rlc2MnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zb3J0QnkgPSBbXQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuc29ydEJ5ID0gW3tjb2x1bW46IHByb3AsIG9yZGVyOiAnYXNjJ31dDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGFwcGx5U29ydCgpDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICANCiAgICAgICAgLy8gY3JlYXRlIHRoZSB0YWJsZSBib2R5DQogICAgICAgIGZvciAoY29uc3QgW2ksIGl0ZW1dIG9mIGFyci5lbnRyaWVzKCkpIHsNCiAgICAgICAgICAgIGNvbnN0IHRyID0gY3JlYXRlRWxlbWVudCh0Ym9keSwgJ3RyJywgW10pOw0KICAgICAgICAgICAgKHRyIGFzIFJvdykucmF3SW5kZXggPSBpDQogICAgICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgcHJvcGVydGllcykgew0KICAgICAgICAgICAgICAgIGNvbnN0IHRkID0gY3JlYXRlRWxlbWVudCh0ciwgJ3RkJywgW10sICcnLCBwcmVzZW50YXRpb24uY29sdW1uUHJvcGVydGllcz8uW3Byb3BdPy5zdHlsZSkNCiAgICAgICAgICAgICAgICBjb25zdCB2ID0gaXRlbVtwcm9wXQ0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdGVyID0gcHJlc2VudGF0aW9uLmNvbHVtblByb3BlcnRpZXM/Lltwcm9wXT8uZm9ybWF0ZXIgfHwgZGVmYXVsdENvbHVtbkZvcm1hdGVyDQogICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkVmFsdWUgPSAocHJvcCA9PT0gcHJlc2VudGF0aW9uLnJhd0luZGV4Q29sdW1uKT8gYCR7aX1gIDogZm9ybWF0ZXIodikNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZvcm1hdHRlZFZhbHVlID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgICAgICB0ZC50ZXh0Q29udGVudCA9IGZvcm1hdHRlZFZhbHVlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZvcm1hdHRlZFZhbHVlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGQuYXBwZW5kQ2hpbGQoZm9ybWF0dGVkVmFsdWUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgaWYgKHByZXNlbnRhdGlvbi5vblJvd0NsaWNrKSB7DQogICAgICAgICAgICAgICAgdHIub25jbGljayA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgcHJlc2VudGF0aW9uLm9uUm93Q2xpY2shKGl0ZW0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRyLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ290b1BhZ2UocGFnZTogbnVtYmVyKSB7DQogICAgICAgIGNvbnN0IHBhZ2VTaXplID0gcHJlc2VudGF0aW9uLnBhZ2VTaXplIHx8IEluZmluaXR5DQogICAgICAgIGNvbnN0IGxhc3RQYWdlID0gTWF0aC5mbG9vcih0b3RhbFZpc2libGUgLyBwYWdlU2l6ZSkNCiAgICAgICAgaWYgKHBhZ2UgPCAwKSBwYWdlID0gMA0KICAgICAgICBpZiAocGFnZSA+IGxhc3RQYWdlKSBwYWdlID0gbGFzdFBhZ2UNCiAgICAgICAgY3VycmVudFBhZ2UgPSBwYWdlDQogICAgICAgIGFwcGx5UGFnaW5nKCkNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhcHBseVBhZ2luZygpIHsNCiAgICAgICAgY29uc3QgcGFnZVNpemUgPSBwcmVzZW50YXRpb24ucGFnZVNpemUgfHwgSW5maW5pdHkNCiAgICAgICAgLy8gb25seSB2aXNpYmxlIHJvd3MgZmFsbGluZyBpbnRvIHRoZSBjdXJyZW50IHBhZ2UgYXJlIHNob3duLCBhbGwgb3RoZXJzIGFyZSBoaWRkZW4NCiAgICAgICAgbGV0IHBvcyA9IDANCiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgdGJvZHkuY2hpbGRyZW4pIHsNCiAgICAgICAgICAgIGNvbnN0IHIgPSByb3cgYXMgUm93DQoNCiAgICAgICAgICAgIGlmIChyLmNsYXNzTGlzdC5jb250YWlucygnaW52aXNpYmxlJykpIHsNCiAgICAgICAgICAgICAgICByLmNsYXNzTGlzdC50b2dnbGUoJ2Qtbm9uZScsIHRydWUpDQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgcGFnZSA9IE1hdGguZmxvb3IocG9zIC8gcGFnZVNpemUpDQogICAgICAgICAgICBpZiAocGFnZSA9PT0gY3VycmVudFBhZ2UpIHsNCiAgICAgICAgICAgICAgICByLmNsYXNzTGlzdC50b2dnbGUoJ2Qtbm9uZScsIGZhbHNlKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICByLmNsYXNzTGlzdC50b2dnbGUoJ2Qtbm9uZScsIHRydWUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBwb3MrKw0KICAgICAgICB9DQogICAgICAgIHBhZ2VUZXh0LnRleHRDb250ZW50ID0gYCR7Y3VycmVudFBhZ2UgKyAxfSAvICR7TWF0aC5jZWlsKHRvdGFsVmlzaWJsZSAvIHByZXNlbnRhdGlvbi5wYWdlU2l6ZSEpfWANCiAgICAgICAgaWYgKCFwcmVzZW50YXRpb24ucGFnZVNpemUpIHsNCiAgICAgICAgICAgIHBhZ2luZy5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXBwbHlGaWx0ZXIoczogc3RyaW5nKSB7DQogICAgICAgIHRvdGFsVmlzaWJsZSA9IDANCiAgICAgICAgbGV0IHRvdGFsID0gMA0KICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGJvZHkuY2hpbGRyZW4pIHsNCiAgICAgICAgICAgIGxldCBtZWV0ID0gZmFsc2UNCiAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiBpdGVtLmNoaWxkcmVuKSB7DQogICAgICAgICAgICAgICAgaWYgKGNlbGwudGV4dENvbnRlbnQ/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocykpIHsNCiAgICAgICAgICAgICAgICAgICAgbWVldCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0b3RhbCsrDQogICAgICAgICAgICB0b3RhbFZpc2libGUgKz0gKG1lZXQgPyAxIDogMCkNCiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnaW52aXNpYmxlJywgIW1lZXQpDQogICAgICAgIH0NCiAgICAgICAgY291bnRzLnRleHRDb250ZW50ID0gYCR7dG90YWxWaXNpYmxlfSAvICR7dG90YWx9YA0KICAgICAgICBjdXJyZW50UGFnZSA9IDANCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzaG93aGlkZUNvbHVtbnMoKSB7DQogICAgICAgIGZvckVhY2hUYWJsZUNlbGwodGFibGUsIChjZWxsLCByb3csIGNvbCkgPT4gew0KICAgICAgICAgICAgY2VsbC5zdHlsZS5kaXNwbGF5ID0gKHN0YXRlLmNvbHVtbnM/P3Byb3BlcnRpZXMpLmluY2x1ZGVzKHByb3BlcnRpZXNbY29sXSkgPyAnJyA6ICdub25lJw0KICAgICAgICB9KQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFwcGx5U29ydCgpIHsNCiAgICAgICAgLy8gdXBkYXRlIHNvcnQgaGludA0KICAgICAgICBjb25zdCBzb3J0QnkgPSBzdGF0ZS5zb3J0QnkgfHwgW10NCiAgICAgICAgc29ydEhpbnQudGV4dENvbnRlbnQgPSBgJHtzb3J0QnkubWFwKHMgPT4gYCR7cy5jb2x1bW59ICR7dG9BcnJvdyhzLm9yZGVyKX1gKS5qb2luKCcsICcpfWANCiAgICAgICAgDQogICAgICAgIC8vIHVwZGF0ZSB0YWJsZSBoZWFkZXIgdG8gc2hvdyBzb3J0ICYgb3JkZXINCiAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIHByb3BdIG9mIHByb3BlcnRpZXMuZW50cmllcygpKSB7DQogICAgICAgICAgICBjb25zdCB0aCA9IHRoZWFkLmNoaWxkcmVuWzBdLmNoaWxkcmVuW2luZGV4XSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudA0KICAgICAgICAgICAgdGguaW5uZXJIVE1MID0gJycgLy8gY2xlYXIgdGhlIGhlYWRlciBjb250ZW50DQogICAgICAgICAgICBjcmVhdGVFbGVtZW50KHRoLCAnc3BhbicsIFtdLCBwcm9wKQ0KICAgICAgICAgICAgY29uc3QgaSA9IHNvcnRCeS5maW5kSW5kZXgocyA9PiBzLmNvbHVtbiA9PT0gcHJvcCkNCiAgICAgICAgICAgIGlmIChpID49IDApIHsNCiAgICAgICAgICAgICAgICBjb25zdCBzID0gc29ydEJ5W2ldDQogICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudCh0aCwgJ3NwYW4nLCBbXSwgdG9BcnJvdyhzLm9yZGVyKSkNCiAgICAgICAgICAgICAgICBpZiAoc29ydEJ5Lmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudCh0aCwgJ3NwYW4nLCBbXSwgYCR7aSArIDF9YCwge3ZlcnRpY2FsQWxpZ246ICdzdXBlcicsIGZvbnRTaXplOiAnMC44ZW0nfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBzb3J0IHRoZSB0YWJsZSByb3dzDQogICAgICAgIGNvbnN0IHJvd3MgPSBBcnJheS5mcm9tKHRib2R5LmNoaWxkcmVuKSBhcyBSb3dbXQ0KICAgICAgICBpZiAoc29ydEJ5Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHJvd3Muc29ydCgoYSwgYikgPT4gew0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBzb3J0QnkpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYVZhbHVlID0gKHMuY29sdW1uID09PSBwcmVzZW50YXRpb24ucmF3SW5kZXhDb2x1bW4pPyBhLnJhd0luZGV4IDogYXJyW2EucmF3SW5kZXhdW3MuY29sdW1uXQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBiVmFsdWUgPSAocy5jb2x1bW4gPT09IHByZXNlbnRhdGlvbi5yYXdJbmRleENvbHVtbik/IGIucmF3SW5kZXggOiBhcnJbYi5yYXdJbmRleF1bcy5jb2x1bW5dDQogICAgICAgICAgICAgICAgICAgIGlmIChhVmFsdWUgPCBiVmFsdWUpIHJldHVybiBzLm9yZGVyID09PSAnYXNjJyA/IC0xIDogMQ0KICAgICAgICAgICAgICAgICAgICBpZiAoYVZhbHVlID4gYlZhbHVlKSByZXR1cm4gcy5vcmRlciA9PT0gJ2FzYycgPyAxIDogLTENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIDANCiAgICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByb3dzLnNvcnQoKGEsIGIpID0+IGEucmF3SW5kZXggLSBiLnJhd0luZGV4KQ0KICAgICAgICB9DQoNCiAgICAgICAgdGJvZHkuaW5uZXJIVE1MID0gJycNCiAgICAgICAgdGJvZHkuYXBwZW5kKC4uLnJvd3MpDQogICAgICAgIGFwcGx5UGFnaW5nKCkNCiAgICB9DQoNCiAgICBmaWVsZFNlbGVjdC5vbmNsaWNrID0gYXN5bmMgKCkgPT4gew0KICAgICAgICBjb25zdCByID0gYXdhaXQgc2hvd1NlbGVjdGlvbignU2VsZWN0IEZpZWxkcycsIHByb3BlcnRpZXMsIHtpbml0aWFsU2VsZWN0aW9uOiBzdGF0ZS5jb2x1bW5zPz9wcm9wZXJ0aWVzfSkNCiAgICAgICAgaWYgKHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuDQoNCiAgICAgICAgLy8gTm90ZTogc2VsZWN0IGFsbCBtZWFucyBub3QganVzdCBzZWxlY3QgYWxsIHRoaXMgdGltZSwgYnV0IGZvciBmdXR1cmUgYXMgd2VsbA0KICAgICAgICAvLyAgICAgICBzbyB3ZSBjYW5ub3QganVzdCBzYXZlIHRoZSBjdXJyZW50IGZ1bGwgc2V0IG9mIHByb3BlcnRpZXMNCiAgICAgICAgLy8gICAgICAgd2UgbmVlZCB0byBzYXZlIGB1bmRlZmluZWRgIHRvIGV4cHJlc3MgdGhpcyBzZW1hbnRpY3MNCiAgICAgICAgLy8gVE9ETzogZmluZCBhIG1vcmUgZGVzY3JpcHRpdmUgd2F5DQogICAgICAgIHN0YXRlLmNvbHVtbnMgPSAoci5sZW5ndGggPT09IHByb3BlcnRpZXMubGVuZ3RoKT8gdW5kZWZpbmVkIDogcg0KICAgICAgICBzaG93aGlkZUNvbHVtbnMoKQ0KICAgIH0NCg0KICAgIHNvcnRCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHsNCiAgICAgICAgLy8gY29uc3RydWN0IGFsbCBwcm9wZXJ0aWVzDQogICAgICAgIGNvbnN0IGFsbE9wdGlvbnMgPSBwcm9wZXJ0aWVzLm1hcChwID0+IFtgJHtwfSAke3RvQXJyb3coJ2FzYycpfWAsIGAke3B9ICR7dG9BcnJvdygnZGVzYycpfWBdKS5mbGF0KCkNCiAgICAgICAgY29uc3Qgc29ydE9wdGlvbnMgPSBzdGF0ZS5zb3J0Qnk/Lm1hcChzID0+IGAke3MuY29sdW1ufSAke3RvQXJyb3cocy5vcmRlcil9YCkNCiAgICAgICAgY29uc3QgY2hlY2tlciA9IChvbGRTZWxlY3Rpb246IHN0cmluZ1tdLCBuZXdTZWxlY3Rpb246IHN0cmluZ1tdKSA9PiB7DQogICAgICAgICAgICBpZiAobmV3U2VsZWN0aW9uLmxlbmd0aCA+IG9sZFNlbGVjdGlvbi5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAvLyBhIG5ldyBzb3J0IGlzIGFkZGVkLCB3ZSB3aWxsIG1ha2Ugc3VyZSB0byByZW1vdmUgb2xkIGR1cGxpY2F0ZXMgaWYgdGhlcmUgaXMNCiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gbmV3U2VsZWN0aW9uW25ld1NlbGVjdGlvbi5sZW5ndGggLSAxXQ0KICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGl0ZW0uc3BsaXQoJyAnKVswXQ0KICAgICAgICAgICAgICAgIHJldHVybiBvbGRTZWxlY3Rpb24uZmlsdGVyKHMgPT4gcy5zcGxpdCgnICcpWzBdICE9PSBrZXkpLmNvbmNhdChbaXRlbV0pDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbmV3U2VsZWN0aW9uDQogICAgICAgfQ0KICAgICAgICBjb25zdCByID0gYXdhaXQgc2hvd1NlbGVjdGlvbignU29ydCBCeScsIGFsbE9wdGlvbnMsIHtwcmVzZXJ2ZU9yZGVyOiB0cnVlLCBpbml0aWFsU2VsZWN0aW9uOiBzb3J0T3B0aW9ucywgY2hlY2tlcn0pDQogICAgICAgIGlmIChyID09PSB1bmRlZmluZWQpIHJldHVybg0KICAgICAgICBzdGF0ZS5zb3J0QnkgPSByLm1hcChzID0+IHsNCiAgICAgICAgICAgIGNvbnN0IFtjb2x1bW4sIG9yZGVyXSA9IHMuc3BsaXQoJyAnKQ0KICAgICAgICAgICAgcmV0dXJuIHtjb2x1bW4sIG9yZGVyOiBmcm9tQXJyb3cob3JkZXIpIGFzICdhc2MnIHwgJ2Rlc2MnfQ0KICAgICAgICB9KQ0KICAgICAgICBhcHBseVNvcnQoKQ0KICAgIH0NCg0KICAgIGZpbHRlci5vbmlucHV0ID0gKCkgPT4gew0KICAgICAgICBjb25zdCB2ID0gZmlsdGVyLnZhbHVlLnRvTG93ZXJDYXNlKCkNCiAgICAgICAgYXBwbHlGaWx0ZXIodikNCiAgICAgICAgYXBwbHlQYWdpbmcoKQ0KICAgIH0NCg0KICAgIHBhZ2VUZXh0Lm9uY2xpY2sgPSAoKSA9PiB7DQogICAgICAgIGNvbnN0IHBhZ2UgPSBOdW1iZXIocHJvbXB0KCdQYWdlIHNpemUnLCBgJHtwcmVzZW50YXRpb24ucGFnZVNpemUgfHwgMjB9YCkpDQogICAgICAgIGdvdG9QYWdlKHBhZ2UgLSAxKQ0KICAgIH0NCiAgICBmaXJzdEJ0bi5vbmNsaWNrID0gKCkgPT4gZ290b1BhZ2UoMCkNCiAgICBwcmV2QnRuLm9uY2xpY2sgPSAoKSA9PiBnb3RvUGFnZShjdXJyZW50UGFnZSAtIDEpDQogICAgbmV4dEJ0bi5vbmNsaWNrID0gKCkgPT4gZ290b1BhZ2UoY3VycmVudFBhZ2UgKyAxKQ0KICAgIGxhc3RCdG4ub25jbGljayA9ICgpID0+IGdvdG9QYWdlKEluZmluaXR5KQ0KDQogICAgLy8gbG9naWMgc3RhcnQgaGVyZQ0KICAgIGNvbnN0cnVjdFRhYmxlKCkNCiAgICBzaG93aGlkZUNvbHVtbnMoKQ0KICAgIGFwcGx5RmlsdGVyKCcnKQ0KICAgIGFwcGx5U29ydCgpDQogICAgcmV0dXJuIHZpZXcNCn0NCg0K",
  "tu.ts": "Ly8gdHU6IGEgc2V0IG9mIHV0aWxpdHkgZnVuY3Rpb25zDQovLyBoYXNoOiBhNmJjODhmZGRmZGRlMDMzOWU3NzRhZTQ2MzQ0YzUwZWQ5YTFlNWNlZjUxMWVkMjY2OTg2YjVhZjA4ZTg2MTk3DQovLyBQbGVhc2UgZG8gbm90IG1vZGlmeSB0aGlzIGZpbGUgZGlyZWN0bHkuIFVzZSB0aGUgZm9sbG93aW5nIGNvbW1hbmQgdG8gdXBkYXRlIHRoaXMgZmlsZSBvbiBhIGRlbm8gZW52aXJvbm1lbnQ6DQovLyBkZW5vIHJ1biAtQSAtLXJlbG9hZCBqc3I6QHRpbWVwcC91dS9pbnN0YWxsDQoNCg0KLy8vIGdldCB0aW1lIGFzIFlZWVktTU0tREQgSEg6bW06c3MNCi8vLyB0aW1lWm9uZU9mZnNldCBpcyBpbiBtaW51dGVzLCBlLmcuIA0KLy8gICAgIC00ODA6IGZvciBVVEMrOA0KLy8gICAgIDQ4MDogZm9yIFVUQy04DQovLyAgICAgMDogZm9yIFVUQw0KLy8gICAgIHVuZGVmaW5lZDogZm9yIGxvY2FsIGRldmljZSB0aW1lem9uZSAoc28gdGhlIHJlc3VsdCBjYW4gYmUgZGlmZmVyZW50IG9uIGRpZmZlcmVudCBkZXZpY2VzKQ0KZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUoZDogRGF0ZSwgdGltZVpvbmVPZmZzZXQ/OiBudW1iZXIpOiBzdHJpbmcgew0KICAgIGNvbnN0IHQgPSBkLmdldFRpbWUoKQ0KICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0IC0gKHRpbWVab25lT2Zmc2V0Pz9kLmdldFRpbWV6b25lT2Zmc2V0KCkpICogNjAgKiAxMDAwKQ0KICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTkpLnJlcGxhY2UoJ1QnLCAnICcpDQp9DQoNCmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRGbG9hdChuOiBudW1iZXIsIGRpZ2l0cyA9IDIsIG1pbmludW1EaWdpdHMgPSAwKTogc3RyaW5nIHsNCiAgICByZXR1cm4gbi50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsIHsgDQogICAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogbWluaW51bURpZ2l0cywgDQogICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogZGlnaXRzLA0KICAgICAgICB1c2VHcm91cGluZzogZmFsc2UsDQogICAgfSkNCn0NCg0KZXhwb3J0IGZ1bmN0aW9uIHRyaW1TdWZmaXgoc3RyOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKTogc3RyaW5nIHsNCiAgICBpZiAoc3RyLmVuZHNXaXRoKHN1ZmZpeCkpIHsNCiAgICAgICAgcmV0dXJuIHN0ci5zbGljZSgwLCAtc3VmZml4Lmxlbmd0aCk7DQogICAgfQ0KICAgIHJldHVybiBzdHI7DQp9DQoNCmV4cG9ydCBmdW5jdGlvbiB0cmltUHJlZml4KHN0cjogc3RyaW5nLCBwcmVmaXg6IHN0cmluZyk6IHN0cmluZyB7DQogICAgaWYgKHN0ci5zdGFydHNXaXRoKHByZWZpeCkpIHsNCiAgICAgICAgcmV0dXJuIHN0ci5zbGljZShwcmVmaXgubGVuZ3RoKTsNCiAgICB9DQogICAgcmV0dXJuIHN0cjsNCn0NCg0KZXhwb3J0IGZ1bmN0aW9uIGhhc2hTdHJpbmcoczogc3RyaW5nKTogbnVtYmVyIHsNCiAgICBsZXQgaGFzaCA9IDA7DQogICAgaWYgKHMubGVuZ3RoID09PSAwKSByZXR1cm4gaGFzaDsNCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaGFzaCA9IChoYXNoIDw8IDUpIC0gaGFzaDsNCiAgICAgICAgaGFzaCA9IGhhc2ggKyBzLmNoYXJDb2RlQXQoaSk7DQogICAgICAgIGhhc2ggPSBoYXNoICYgaGFzaDsNCiAgICB9DQogICAgcmV0dXJuIGhhc2g7DQp9DQoNCg0KZXhwb3J0IGZ1bmN0aW9uIHRvRmlsZVN5c3RlbUNvbXBhdGlibGVOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7DQogICAgLy8gMS4gUmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNwYWNlcw0KICAgIG5hbWUgPSBuYW1lLnRyaW0oKQ0KDQogICAgLy8gMi4gUmVwbGFjZSBpbnZhbGlkIGNoYXJhY3RlcnMgd2l0aCB1bmRlcnNjb3Jlcw0KICAgIGNvbnN0IGludmFsaWRDaGFycyA9IC9bPD46Ii9cXHw/Kl0vZw0KICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoaW52YWxpZENoYXJzLCAnXycpDQoNCiAgICAvLyAzLiBMaW1pdCBsZW5ndGggdG8gMjU1IGNoYXJhY3RlcnMNCiAgICBpZiAobmFtZS5sZW5ndGggPiAyNTUpIHsNCiAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgMjU1KQ0KICAgIH0NCg0KICAgIHJldHVybiBuYW1lDQp9DQoNCmZ1bmN0aW9uIHRyYXZlcnNlT2JqZWN0SW50ZXJuYWwob2JqOiBhbnksIGNhbGxiYWNrOiAocGF0aDogc3RyaW5nW10sIHZhbHVlOiBhbnksIHR5cGU6ICdvYmplY3QnfCdsZWFmJ3wnbG9vcCcpID0+IHZvaWQsIHBhdGg6IHN0cmluZ1tdLCBzZWVuT2JqZWN0czogV2Vha1NldDxvYmplY3Q+KTogdm9pZCB7DQogICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkgew0KICAgICAgICBjYWxsYmFjayhwYXRoLCBvYmosICdsZWFmJyk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBpZiAoc2Vlbk9iamVjdHMuaGFzKG9iaikpIHsNCiAgICAgICAgY2FsbGJhY2socGF0aCwgb2JqLCAnbG9vcCcpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHNlZW5PYmplY3RzLmFkZChvYmopOw0KICAgICAgICBjYWxsYmFjayhwYXRoLCBvYmosICdvYmplY3QnKTsNCiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7DQogICAgICAgICAgICB0cmF2ZXJzZU9iamVjdEludGVybmFsKG9ialtrZXldLCBjYWxsYmFjaywgWy4uLnBhdGgsIGtleV0sIHNlZW5PYmplY3RzKTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlT2JqZWN0KG9iajogYW55LCBjYWxsYmFjazogKHBhdGg6IHN0cmluZ1tdLCB2YWx1ZTogYW55LCB0eXBlOiAnb2JqZWN0J3wnbGVhZid8J2xvb3AnKSA9PiB2b2lkKTogdm9pZCB7DQogICAgY29uc3Qgc2Vlbk9iamVjdHMgPSBuZXcgV2Vha1NldDxvYmplY3Q+KCkNCiAgICB0cmF2ZXJzZU9iamVjdEludGVybmFsKG9iaiwgY2FsbGJhY2ssIFtdLCBzZWVuT2JqZWN0cykNCn0NCg0KZXhwb3J0IGZ1bmN0aW9uIGRhdGFQcm9wZXJ0aWVzKGFycjogb2JqZWN0W10pOiBzdHJpbmdbXSB7DQogICAgY29uc3QgcHJvcFNldCA9IG5ldyBTZXQ8c3RyaW5nPigpDQogICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikgew0KICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpdGVtKSB7DQogICAgICAgICAgICBwcm9wU2V0LmFkZChrZXkpDQogICAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIFsuLi5wcm9wU2V0XQ0KfQ0KDQovLyBjYXRjaCBhbGwgZXhjcGV0aW9uIGFuZCByZXR1cm4gYSBkZWZhdWx0IHZhbHVlIGlmIGVycm9yIG9jY3Vycw0KZXhwb3J0IGZ1bmN0aW9uIHNhZmVFeGVjdXRlPFQ+KGZuOiAoKSA9PiBULCBkZWZhdWx0VmFsdWU6IFQgfCAoKGU6IHVua25vd24pID0+IFQpKTogVCB7DQogICAgdHJ5IHsNCiAgICAgICAgcmV0dXJuIGZuKCkNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICByZXR1cm4gKGRlZmF1bHRWYWx1ZSBhcyAoZTogdW5rbm93bikgPT4gVCkoZSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0YXRlPFQgZXh0ZW5kcyBvYmplY3Q+KG9iamVjdDogVCwgcHJvcGVydGllczogKGtleW9mIFQpW10sIHN0YXRlS2V5Pzogc3RyaW5nKTogUGljazxULCB0eXBlb2YgcHJvcGVydGllc1tudW1iZXJdPiB7DQogICAgLy8g5YaF6YOo5a2Y5YKo55qE54q25oCB5a+56LGhDQogICAgY29uc3QgaW50ZXJuYWxTdGF0ZTogUGFydGlhbDxUPiA9IHt9Ow0KDQogICAgLy8g5Yid5aeL5YyWIGludGVybmFsU3RhdGXvvIzlj6rljIXlkKvmjIflrprnmoTlsZ7mgKcNCiAgICBwcm9wZXJ0aWVzLmZvckVhY2goKHByb3ApID0+IHsNCiAgICAgICAgaWYgKHByb3AgaW4gb2JqZWN0KSB7DQogICAgICAgICAgICBpbnRlcm5hbFN0YXRlW3Byb3BdID0gb2JqZWN0W3Byb3BdOw0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICAvLyDlrprkuYnku6PnkIblr7nosaENCiAgICBjb25zdCBzdGF0ZSA9IG5ldyBQcm94eShpbnRlcm5hbFN0YXRlLCB7DQogICAgICAgIGdldCh0YXJnZXQ6IFBhcnRpYWw8VD4sIHByb3A6IHN0cmluZyB8IHN5bWJvbCwgcmVjZWl2ZXI6IGFueSkgew0KICAgICAgICAgICAgLy8g5bCGIHByb3Ag6L2s5o2i5Li6IGtleW9mIFQg57G75Z6L77yM5bm25qOA5p+l5piv5ZCm5ZyoIHByb3BlcnRpZXMg5LitDQogICAgICAgICAgICBjb25zdCBrZXkgPSBwcm9wIGFzIGtleW9mIFQ7DQogICAgICAgICAgICBpZiAocHJvcGVydGllcy5pbmNsdWRlcyhrZXkpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQcm9wZXJ0eSAnJHtTdHJpbmcocHJvcCl9JyBpcyBub3QgbWFuYWdlZCBieSB0aGlzIHN0YXRlYCk7DQogICAgICAgICAgICAvLyByZXR1cm4gdW5kZWZpbmVkOyAvLyDmnKrmjIflrprnmoTlsZ7mgKfov5Tlm54gdW5kZWZpbmVkDQogICAgICAgIH0sDQogICAgICAgIHNldCh0YXJnZXQ6IFBhcnRpYWw8VD4sIHByb3A6IHN0cmluZyB8IHN5bWJvbCwgdmFsdWU6IGFueSkgew0KICAgICAgICAgICAgLy8g5bCGIHByb3Ag6L2s5o2i5Li6IGtleW9mIFQg57G75Z6L77yM5bm25qOA5p+l5piv5ZCm5ZyoIHByb3BlcnRpZXMg5LitDQogICAgICAgICAgICBjb25zdCBrZXkgPSBwcm9wIGFzIGtleW9mIFQ7DQogICAgICAgICAgICBpZiAocHJvcGVydGllcy5pbmNsdWRlcyhrZXkpKSB7DQogICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICBzYXZlU3RhdGUoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvcGVydHkgJyR7U3RyaW5nKHByb3ApfScgaXMgbm90IG1hbmFnZWQgYnkgdGhpcyBzdGF0ZWApOw0KICAgICAgICB9DQogICAgfSkgYXMgUGljazxULCB0eXBlb2YgcHJvcGVydGllc1tudW1iZXJdPjsNCg0KICAgIC8vIOWKoOi9veeKtuaAgQ0KICAgIGZ1bmN0aW9uIGxvYWRTdGF0ZSgpIHsNCiAgICAgICAgaWYgKCFzdGF0ZUtleSkgcmV0dXJuOw0KICAgICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdGF0ZUtleSk7DQogICAgICAgIGlmIChzdG9yZWQpIHsNCiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc3RvcmVkKTsNCiAgICAgICAgICAgIHByb3BlcnRpZXMuZm9yRWFjaCgocHJvcCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChwcm9wIGluIHBhcnNlZCkgew0KICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFN0YXRlW3Byb3BdID0gcGFyc2VkW3Byb3BdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8g5L+d5a2Y54q25oCBDQogICAgZnVuY3Rpb24gc2F2ZVN0YXRlKCkgew0KICAgICAgICBpZiAoIXN0YXRlS2V5KSByZXR1cm47DQogICAgICAgIGNvbnN0IHBlcnNpc3RTdGF0ZTogUGFydGlhbDxUPiA9IHt9Ow0KICAgICAgICBwcm9wZXJ0aWVzLmZvckVhY2goKHByb3ApID0+IHsNCiAgICAgICAgICAgIHBlcnNpc3RTdGF0ZVtwcm9wXSA9IGludGVybmFsU3RhdGVbcHJvcF07DQogICAgICAgIH0pOw0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzdGF0ZUtleSwgSlNPTi5zdHJpbmdpZnkocGVyc2lzdFN0YXRlKSk7DQogICAgfQ0KDQogICAgLy8g5Yqg6L295Yid5aeL54q25oCBDQogICAgbG9hZFN0YXRlKCk7DQoNCiAgICByZXR1cm4gc3RhdGU7DQp9DQoNCi8vLyBicmVhayB0ZXh0IGludG8gcGllY2VzIGJ5IGdpdmVuIHJlZ2V4IG1hdGNoZXJzDQovLy8gZWFjaCBwaWVjZSBpcyBhdHRhY2hlZCB3aXRoIGEgY2F0ZWdvcnkNCi8vLyByZXR1cm46IHtjb250ZW50LCBjYXRlZ29yeX1bXSB0aGF0IGNvdmVycyB0aGUgd2hvbGUgdGV4dA0KZXhwb3J0IGZ1bmN0aW9uIHNlZ21lbnRCeVJlZ2V4KHRleHQ6IHN0cmluZywgaGM6IFtSZWdFeHAsIHN0cmluZ11bXSk6IHtjb250ZW50OiBzdHJpbmcsIGNhdGVnb3J5OiBzdHJpbmd9W10gew0KICAgIGNvbnN0IG1hdGNoZXM6IHsgaW5kZXg6IG51bWJlcjsgbGVuZ3RoOiBudW1iZXI7IGNvbnRlbnQ6IHN0cmluZzsgY2F0ZWdvcnk6IHN0cmluZyB9W10gPSBbXTsNCg0KICAgIC8vIOaUtumbhuaJgOacieWMuemFjemhue+8jOaMieeFp+S8mOWFiOe6p+S7jumrmOWIsOS9juWkhOeQhg0KICAgIGZvciAoY29uc3QgW3JlLCBjYXRlZ29yeV0gb2YgaGMpIHsNCiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiB0ZXh0Lm1hdGNoQWxsKHJlKSkgew0KICAgICAgICAgICAgaWYgKG1hdGNoLmluZGV4ICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaFN0YXJ0ID0gbWF0Y2guaW5kZXg7DQogICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hFbmQgPSBtYXRjaFN0YXJ0ICsgbWF0Y2gubGVuZ3RoOw0KDQogICAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5LiO5bey5pyJ5Yy56YWN6aG56YeN5Y+gDQogICAgICAgICAgICAgICAgbGV0IG92ZXJsYXAgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV4aXN0aW5nTWF0Y2ggb2YgbWF0Y2hlcykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1N0YXJ0ID0gZXhpc3RpbmdNYXRjaC5pbmRleDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdFbmQgPSBleGlzdGluZ1N0YXJ0ICsgZXhpc3RpbmdNYXRjaC5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgIGlmICgobWF0Y2hTdGFydCA8IGV4aXN0aW5nRW5kICYmIG1hdGNoRW5kID4gZXhpc3RpbmdTdGFydCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXAgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmsqHmnInph43lj6DvvIzmt7vliqDliLDljLnphY3pobnliJfooagNCiAgICAgICAgICAgICAgICBpZiAoIW92ZXJsYXApIHsNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKHsgaW5kZXg6IG1hdGNoLmluZGV4LCBsZW5ndGg6IG1hdGNoWzBdLmxlbmd0aCwgY29udGVudDogbWF0Y2hbMF0sIGNhdGVnb3J5IH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIOaMiSBgaW5kZXhgIOS7juWwj+WIsOWkp+aOkuW6j++8jOehruS/neWMuemFjemhuuW6j+ato+ehrg0KICAgIG1hdGNoZXMuc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpOw0KICAgIGNvbnNvbGUubG9nKG1hdGNoZXMpDQogICAgDQogICAgLy8gcnVuIHRocm91Z2ggdGhlIHRleHQgYW5kIGNyZWF0ZSBwaWVjZXMNCiAgICBjb25zdCBwaWVjZXM6IHsgY29udGVudDogc3RyaW5nLCBjYXRlZ29yeTogc3RyaW5nIH1bXSA9IFtdOw0KICAgIGxldCBsYXN0SW5kZXggPSAwOw0KICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcykgew0KICAgICAgICBjb25zdCB7IGluZGV4LCBsZW5ndGgsIGNvbnRlbnQsIGNhdGVnb3J5IH0gPSBtYXRjaDsNCiAgICAgICAgaWYgKGxhc3RJbmRleCA8IGluZGV4KSB7DQogICAgICAgICAgICBwaWVjZXMucHVzaCh7Y29udGVudDogdGV4dC5zbGljZShsYXN0SW5kZXgsIGluZGV4KSwgY2F0ZWdvcnk6ICcnfSk7DQogICAgICAgIH0NCiAgICAgICAgcGllY2VzLnB1c2goe2NvbnRlbnQsIGNhdGVnb3J5fSk7DQogICAgICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbGVuZ3RoOw0KICAgIH0NCiAgICBpZiAobGFzdEluZGV4IDwgdGV4dC5sZW5ndGgpIHsNCiAgICAgICAgcGllY2VzLnB1c2goe2NvbnRlbnQ6IHRleHQuc2xpY2UobGFzdEluZGV4KSwgY2F0ZWdvcnk6ICcnfSk7DQogICAgfQ0KICAgIHJldHVybiBwaWVjZXM7DQp9DQoNCi8vLyBoaWdobGlnaHQganNvbiB0ZXh0IHdpdGggdGhlIGZvbGxvd2luZyBjb25zdHJ1Y3RzOg0KLy8vIC0ga2V5OiAia2V5IjoNCi8vLyAtIHN0cmluZzogInN0cmluZyINCi8vLyAtIG51bWJlcjogMTIzDQovLy8gLSBib29sZWFuOiB0cnVlL2ZhbHNlDQovLy8gLSBudWxsOiBudWxsDQovLy8gLSBwdW5jdHVhdGlvbjogeywgfSwgWywgXSwgOiwgLA0KZXhwb3J0IGZ1bmN0aW9uIHNlZ21lbnRKc29uKHRleHQ6IHN0cmluZyk6IHtjb250ZW50OiBzdHJpbmcsIGNhdGVnb3J5OiAna2V5JyB8ICdzdHJpbmcnIHwgJ251bWJlcicgfCAndHJ1ZScgfCAnZmFsc2UnIHwgJ251bGwnIHwgJ3B1bmN0dWF0aW9uJyB8ICcnfVtdIHsNCiAgICByZXR1cm4gc2VnbWVudEJ5UmVnZXgodGV4dCwgWw0KICAgICAgICBbLyJbXiJdKyI6L2csICdrZXknXSwNCiAgICAgICAgWy8iKD86W14iXFxdfFxcLikqIi9nLCAnc3RyaW5nJ10sIC8vIOaUr+aMgei9rOS5ieeahOWtl+espuS4suWMuemFjQ0KICAgICAgICBbL1xkKy9nLCAnbnVtYmVyJ10sDQogICAgICAgIFsvdHJ1ZS9nLCAndHJ1ZSddLA0KICAgICAgICBbL2ZhbHNlL2csICdmYWxzZSddLA0KICAgICAgICBbL251bGwvZywgJ251bGwnXSwNCiAgICAgICAgWy9be31bXF06LF0vZywgJ3B1bmN0dWF0aW9uJ10sDQogICAgXSkgYXMgew0KICAgICAgICBjb250ZW50OiBzdHJpbmcsDQogICAgICAgIGNhdGVnb3J5OiAna2V5JyB8ICdzdHJpbmcnIHwgJ251bWJlcicgfCAndHJ1ZScgfCAnZmFsc2UnIHwgJ251bGwnIHwgJ3B1bmN0dWF0aW9uJyB8ICcnDQogICAgfVtdDQp9DQoNCi8qKiBnZXQgdGhlIGRhdGUgYm91bmRhcmllcyBmb3IgYSBnaXZlbiBkYXRlIGFuZCB0eXBlDQogKiAgQGV4YW1wbGUgZ2V0RGF0ZUJvdW5kYXJpZXMobmV3IERhdGUoKSwgJ3dlZWsnLCAxKSAvLyBnZXQgdGhlIG5leHQgd2VlayBib3VuZGFyaWVzDQogKiAgQGV4YW1wbGUgZ2V0RGF0ZUJvdW5kYXJpZXMobmV3IERhdGUoKSwgJ3dlZWsnLCAtMSkgLy8gZ2V0IHRoZSBsYXN0IHdlZWsgYm91bmRhcmllcw0KICogIEBleGFtcGxlIGdldERhdGVCb3VuZGFyaWVzKG5ldyBEYXRlKCksICdtb250aCcsIDApIC8vIGdldCBjdXJyZW50IG1vbnRoIGJvdW5kYXJpZXMNCiAqLw0KZXhwb3J0IGZ1bmN0aW9uIGdldERhdGVCb3VuZGFyaWVzKHQ6IERhdGUsIHR5cGU6ICd3ZWVrJyB8ICdtb250aCcgfCAnZGF5JyB8ICd5ZWFyJywgb2Zmc2V0OiBudW1iZXIgPSAwKTogeyBzdGFydDogRGF0ZSwgZW5kOiBEYXRlIH0gew0KICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUodCk7DQogICAgY29uc3QgZW5kID0gbmV3IERhdGUodCk7DQoNCiAgICBzd2l0Y2ggKHR5cGUpIHsNCiAgICAgICAgY2FzZSAnd2Vlayc6DQogICAgICAgICAgICBjb25zdCBkYXkgPSBzdGFydC5nZXREYXkoKTsNCiAgICAgICAgICAgIHN0YXJ0LnNldERhdGUoc3RhcnQuZ2V0RGF0ZSgpIC0gKGRheSA9PT0gMCA/IDYgOiBkYXkgLSAxKSArIG9mZnNldCAqIDcpOw0KICAgICAgICAgICAgZW5kLnNldERhdGUoc3RhcnQuZ2V0RGF0ZSgpICsgNik7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAnbW9udGgnOg0KICAgICAgICAgICAgc3RhcnQuc2V0TW9udGgoc3RhcnQuZ2V0TW9udGgoKSArIG9mZnNldCwgMSk7DQogICAgICAgICAgICBlbmQuc2V0TW9udGgoc3RhcnQuZ2V0TW9udGgoKSArIDEsIDApOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ2RheSc6DQogICAgICAgICAgICBzdGFydC5zZXREYXRlKHN0YXJ0LmdldERhdGUoKSArIG9mZnNldCk7DQogICAgICAgICAgICBlbmQuc2V0RGF0ZShzdGFydC5nZXREYXRlKCkpOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3llYXInOg0KICAgICAgICAgICAgc3RhcnQuc2V0RnVsbFllYXIoc3RhcnQuZ2V0RnVsbFllYXIoKSArIG9mZnNldCwgMCwgMSk7DQogICAgICAgICAgICBlbmQuc2V0RnVsbFllYXIoc3RhcnQuZ2V0RnVsbFllYXIoKSwgMTEsIDMxKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgIH0NCg0KICAgIHN0YXJ0LnNldEhvdXJzKDAsIDAsIDAsIDApOw0KICAgIGVuZC5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpOw0KDQogICAgcmV0dXJuIHsgc3RhcnQsIGVuZCB9Ow0KfQ0KDQovKiogVGhpcyBmdW5jdGlvbiBmaXhlcyB0aGUgYnVnIGluIERhdGUgdGhhdCB3aGVuIHRpbWUgcGFydCBpdCdzIG5vdCBnaXZlbiwgaXQgDQogICAgd2lsbCBjb25zdHJ1Y3QgVVRDIGRhdGUgaW5zdGVhZCBvZiBsb2NhbCBkYXRlLg0KICAgIEBzZWUgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9zZWFyY2g/cT1kYXRlLW9ubHkrZm9ybXMrYXJlK2ludGVycHJldGVkK2FzK2ErVVRDK3RpbWUNCiovDQpleHBvcnQgZnVuY3Rpb24gcGFyc2VEYXRlKHM6IHN0cmluZykgOiBEYXRlIHsNCiAgICBpZiAoIXMuaW5jbHVkZXMoJzonKSkgew0KICAgICAgICBzID0gcyArICdUMDA6MDA6MDAnDQogICAgfQ0KICAgIHJldHVybiBuZXcgRGF0ZShzKQ0KfQ0KDQovKiogcmVwbGFjZSBodG1sIHRlbXBsYXRlDQogKiAgdGhpcyBmdW5jdGlvbiByZXBsYWNlIHRoZSBmb2xsb3dpbmcgd2l0aCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSBpbiB0aGUgcmVwbGFjZW1lbnRzIG9iamVjdDoNCiAqICA8IS0tIHt7a2V5fX0gQmVnaW4gLS0+DQogICAgLi4uDQogICAgPCEtLSB7e2tleX19IEVuZCAtLT4NCiAqLw0KZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VIdG1sVGVtcGxhdGUodGVtcGxhdGU6IHN0cmluZywgcmVwbGFjZW1lbnRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogc3RyaW5nIHsNCiAgICBjb25zdCByZWdleCA9IC88IS0tXHMqe3soLio/KX19XHMqQmVnaW5ccyotLT4oW1xzXFNdKj8pPCEtLVxzKnt7XDF9fVxzKkVuZFxzKi0tPi9nOw0KICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKHJlZ2V4LCAobWF0Y2gsIGtleSkgPT4gew0KICAgICAgICByZXR1cm4gcmVwbGFjZW1lbnRzW2tleV0gfHwgbWF0Y2g7DQogICAgfSk7DQp9DQoNCmV4cG9ydCB0eXBlIFRva2VuSW5mbyA9IHsNCiAgICBhdWQ6IHN0cmluZzsNCiAgICB1cG46IHN0cmluZzsNCiAgICBleHA6IG51bWJlcjsNCiAgICBzY3A/OiBzdHJpbmc7DQp9DQoNCmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVKd3QodG9rZW46IHN0cmluZyk6IHsgcmF3OiBzdHJpbmcsIHRpOiBUb2tlbkluZm8sIGlzRXhwaXJlZDogYm9vbGVhbiB9IHsNCiAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7DQogICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMykgew0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pXVCBtdXN0IGhhdmUgMyBwYXJ0cycpOw0KICAgIH0NCg0KICAgIC8vIGNvbnZlcnQgYmFzZTY0dXJsIHRvIGJhc2U2NA0KICAgIGNvbnN0IGJhc2U2NFVybCA9IHBhcnRzWzFdLnJlcGxhY2UoLy0vZywgJysnKS5yZXBsYWNlKC9fL2csICcvJyk7DQogICAgY29uc3QgcGF5bG9hZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjRVcmwpKTsNCg0KICAgIGNvbnN0IHRpID0gcGF5bG9hZCBhcyBUb2tlbkluZm87DQogICAgLy8gY2hlY2sgaWYgdGhlIHRva2VuIGlzIGV4cGlyZWQNCiAgICBjb25zdCBpc0V4cGlyZWQgPSB0aS5leHAgPCBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTsNCiAgICByZXR1cm4gew0KICAgICAgICByYXc6IHRva2VuLA0KICAgICAgICB0aSwNCiAgICAgICAgaXNFeHBpcmVkLA0KICAgIH0NCn0NCg=="
}
